---
title: "Trabajo Reglas Asociación"
author: "Juanjo Sierra"
date: "27 de enero de 2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

En este trabajo final sobre **reglas de asociación** se ha seleccionado un dataset sobre el que trabajar obteniendo reglas que resulten de interés y que aporten información a los datos que ya se poseen. A continuación se estudiarán los itemsets frecuentes, maximales y cerrados, se obtendrán las reglas correspondientes al mínimo soporte establecido, y en general se hará uso de las técnicas aprendidas durante el curso para así alcanzar el objetivo de la práctica.

## Carga de librerías

En primer lugar es necesario cargar las librerías necesarias para trabajar con reglas de asociación. En el caso de este trabajo se van a utilizar las siguientes. 

```{r}
library(arules)
library(arulesViz)
library(pmml)
library(mlbench)
```

## Lectura de los datos

El dataset que se ha escogido para desarrollar este trabajo ha sido _Contraceptive Method Choice_, obtenido del repositorio de datasets de la Universidad de California-Irvine. Este conjunto de datos determina el método de anticoncepción elegido por una pareja, que puede ser ninguno, a corto plazo o a largo plazo.

```{r}
Contraceptive = read.csv("./Datos/cmc.data", header = FALSE)
head(Contraceptive)
```

Para dar un nombre adecuado a cada variable se van a utilizar la información extraída del archivo `cmc.names`. De esta forma también se le dará una nomenclatura adecuada a los valores que puede tomar cada una de las características, convirtiéndolas en un factor cuando sea necesario.

```{r}
colnames(Contraceptive) = c("Wife's age", "Wife's education", "Husband's education",
														"Children", "Wife's religion", "Wife working",
														"Husband's occupation", "Standard-of-living",
														"Media exposure", "Contraceptive method")

# Wife's education
Contraceptive[,2] = ordered(Contraceptive[,2], levels = 1:4,
														labels = c("Low", "Mid-low", "Mid-high", "High"))

# Husband's education
Contraceptive[,3] = ordered(Contraceptive[,3], levels = 1:4,
														labels = c("Low", "Mid-low", "Mid-high", "High"))

# Wife's religion
Contraceptive[,5] = factor(Contraceptive[,5], levels = 0:1,
														labels = c("Non-Islam", "Islam"))

# Wife working
Contraceptive[,6] = factor(Contraceptive[,6], levels = 0:1,
														labels = c("Yes", "No"))
									# Â¡No es un error! "0" significa "sÃ­" en esta variable...

# Standard-of-living
Contraceptive[,8] = ordered(Contraceptive[,8], levels = 1:4,
														labels = c("Low", "Mid-low", "Mid-high", "High"))

# Media exposure
Contraceptive[,9] = factor(Contraceptive[,9], levels = 0:1,
														labels = c("Good", "Not good"))

# Contraceptive method
Contraceptive[,10] = factor(Contraceptive[,10], levels = 1:3,
														labels = c("No-use", "Long-term", "Short-term"))

head(Contraceptive)
```

Cabe destacar que para la variable "Husband's occupation" no se especifica en la información del dataset el significado de los distintos valores, por lo que si aparece en futuras reglas o itemsets se tratarán estos valores de forma similar al resto de variables, siendo 1 el de valor más bajo y 4 el más alto.

Ahora que los datos son más legibles e interpretables se puede proceder a extraer itemsets frecuentes.

